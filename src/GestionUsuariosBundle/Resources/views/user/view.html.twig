{% extends('ppal.html.twig') %}
{% block stylesheets %}
 	{{ parent() }}
 	<link rel="stylesheet" href="{{ asset('bundles/mantalmacen/css/estilos.css')}}">
{% endblock %}
{% block body %}
{{ parent() }}

<div class="container">
	<div class="card">
	  <div class="card-header">
	     Apellido, Nombre:  {{ user }} <br>
	     Perfil: {{ user.role }}
	  </div>
	</div>
	
			{% for flash_message in app.session.flashbag.get('signerror') %}
			<div class="alert alert-danger" role="alert">
				{{ flash_message }}
			</div>
		{% endfor %}
		{% for flash_message in app.session.flashbag.get('signok') %}
			<div class="alert alert-success" role="alert">
				{{ flash_message }}
			</div>
		{% endfor %}	
	<div class="card-header">
	<span class="h6">Roles del usuario</span>
		<table class="table table-striped table-bordered table-hover table-sm">
					<thead>
						<tr>
                            <th scope="col">Role</th>							
                            <th>Accion</th>
						</tr>
					</thead>
					<tbody>
						{%  for rol in user.permisos %}
							<tr>
								<td class="col-6">
									{{ rol }}
								</td> 
								<td align="center" class="col-6">
										{{ form_start(formRoles[rol.id]) }}
										{{ form_widget(formRoles[rol.id].action, {'attr':{'class' : 'btn btn-warning btn-sm sing estilo1'}}) }}
										{{ form_end(formRoles[rol.id]) }}									
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
		{{ form_start(addRole) }}				
		<div class="row">
			<div class="col-4">
						{{ form_widget(addRole.roles , {'attr':{'class' : 'form-control'}})}}	
			</div>
			<div class="col-2">
						{{ form_widget(addRole.action, {'attr':{'class' : 'btn btn-success'}}) }}
			</div>
			
		</div>
		{{ form_end(addRole) }}	
	</div>
	<div class="card-header">
	<span class="h6">Depositos autorizados</span>
		<table class="table table-striped table-bordered table-hover table-sm">
					<thead>
						<tr>
                            <th scope="col">Deposito</th>							
                            <th>Accion</th>
						</tr>
					</thead>
					<tbody>
						{%  for rol in user.depositos %}
							<tr>
								<td class="col-6">
									{{ rol }}
								</td>
								<td align="center" class="col-6">
										{{ form_start(formDepos[rol.id]) }}
										{{ form_widget(formDepos[rol.id].action, {'attr':{'class' : 'btn btn-warning btn-sm sing estilo1'}}) }}
										{{ form_end(formDepos[rol.id]) }}									
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
		{{ form_start(addDepo) }}				
		<div class="row">
			<div class="col-4">
						{{ form_widget(addDepo.almacenes , {'attr':{'class' : 'form-control'}})}}	
			</div>
			<div class="col-2">
						{{ form_widget(addDepo.action, {'attr':{'class' : 'btn btn-success'}}) }}
			</div>
			
		</div>
		{{ form_end(addDepo) }}												
	</div>	
</div>

		
{% endblock %}
{% block javascripts %}
	{{ parent() }}
{% endblock %}
